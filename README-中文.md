# å¤šæ™ºèƒ½ä½“å¯è§‚æµ‹æ€§ç³»ç»Ÿ

é€šè¿‡å…¨é¢çš„é’©å­äº‹ä»¶è·Ÿè¸ªï¼Œä¸º Claude Code æ™ºèƒ½ä½“æä¾›å®æ—¶ç›‘æ§å’Œå¯è§†åŒ–ã€‚ä½ å¯ä»¥åœ¨[è¿™é‡Œè§‚çœ‹å®Œæ•´ä»‹ç»](https://youtu.be/9ijnN985O_c)ã€‚

## ğŸ¯ æ¦‚è¿°

è¯¥ç³»ç»Ÿé€šè¿‡å®æ—¶æ•è·ã€å­˜å‚¨å’Œå¯è§†åŒ– Claude Code [é’©å­äº‹ä»¶](https://docs.anthropic.com/en/docs/claude-code/hooks)ï¼Œæä¾›å¯¹ Claude Code æ™ºèƒ½ä½“è¡Œä¸ºçš„å®Œæ•´å¯è§‚æµ‹æ€§ã€‚æ”¯æŒä¼šè¯è·Ÿè¸ªã€äº‹ä»¶è¿‡æ»¤å’Œå®æ—¶æ›´æ–°çš„å¤šå¹¶å‘æ™ºèƒ½ä½“ç›‘æ§ã€‚

<img src="images/app.png" alt="å¤šæ™ºèƒ½ä½“å¯è§‚æµ‹æ€§ä»ªè¡¨æ¿" style="max-width: 800px; width: 100%;">

## ğŸ—ï¸ æ¶æ„

```
Claude æ™ºèƒ½ä½“ â†’ é’©å­è„šæœ¬ â†’ HTTP POST â†’ Bun æœåŠ¡å™¨ â†’ SQLite â†’ WebSocket â†’ Vue å®¢æˆ·ç«¯
```

![æ™ºèƒ½ä½“æ•°æ®æµåŠ¨ç”»](images/AgentDataFlowV2.gif)

## ğŸ“‹ å®‰è£…è¦æ±‚

å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿å·²å®‰è£…ä»¥ä¸‹è½¯ä»¶ï¼š

- **[Claude Code](https://docs.anthropic.com/en/docs/claude-code)** - Anthropic å®˜æ–¹ Claude CLI
- **[Astral uv](https://docs.astral.sh/uv/)** - å¿«é€Ÿ Python åŒ…ç®¡ç†å™¨ï¼ˆé’©å­è„šæœ¬å¿…éœ€ï¼‰
- **[Bun](https://bun.sh/)**ã€**npm** æˆ– **yarn** - ç”¨äºè¿è¡ŒæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯
- **Anthropic API å¯†é’¥** - è®¾ç½®ä¸º `ANTHROPIC_API_KEY` ç¯å¢ƒå˜é‡
- **OpenAI API å¯†é’¥**ï¼ˆå¯é€‰ï¼‰- ç”¨äºä¸ just-prompt MCP å·¥å…·çš„å¤šæ¨¡å‹æ”¯æŒ
- **ElevenLabs API å¯†é’¥**ï¼ˆå¯é€‰ï¼‰- ç”¨äºéŸ³é¢‘åŠŸèƒ½

### é…ç½® .claude ç›®å½•

ä¸ºäº†åœ¨æ‚¨çš„ä»“åº“ä¸­è®¾ç½®å¯è§‚æµ‹æ€§ï¼Œæˆ‘ä»¬éœ€è¦å°† .claude ç›®å½•å¤åˆ¶åˆ°æ‚¨çš„é¡¹ç›®æ ¹ç›®å½•ã€‚

è¦å°†å¯è§‚æµ‹æ€§é’©å­é›†æˆåˆ°æ‚¨çš„é¡¹ç›®ä¸­ï¼š

1. **å°†æ•´ä¸ª `.claude` ç›®å½•å¤åˆ¶åˆ°æ‚¨çš„é¡¹ç›®æ ¹ç›®å½•ï¼š**
   ```bash
   cp -R .claude /path/to/your/project/
   ```

2. **æ›´æ–° `settings.json` é…ç½®ï¼š**
   
   åœ¨æ‚¨çš„é¡¹ç›®ä¸­æ‰“å¼€ `.claude/settings.json` å¹¶ä¿®æ”¹ `source-app` å‚æ•°ä»¥æ ‡è¯†æ‚¨çš„é¡¹ç›®ï¼š
   
   ```json
   {
     "hooks": {
       "PreToolUse": [{
         "matcher": "",
         "hooks": [
           {
             "type": "command",
             "command": "uv run .claude/hooks/pre_tool_use.py"
           },
           {
             "type": "command",
             "command": "uv run .claude/hooks/send_event.py --source-app YOUR_PROJECT_NAME --event-type PreToolUse --summarize"
           }
         ]
       }],
       "PostToolUse": [{
         "matcher": "",
         "hooks": [
           {
             "type": "command",
             "command": "uv run .claude/hooks/post_tool_use.py"
           },
           {
             "type": "command",
             "command": "uv run .claude/hooks/send_event.py --source-app YOUR_PROJECT_NAME --event-type PostToolUse --summarize"
           }
         ]
       }],
       "UserPromptSubmit": [{
         "hooks": [
           {
             "type": "command",
             "command": "uv run .claude/hooks/user_prompt_submit.py --log-only"
           },
           {
             "type": "command",
             "command": "uv run .claude/hooks/send_event.py --source-app YOUR_PROJECT_NAME --event-type UserPromptSubmit --summarize"
           }
         ]
       }]
       // ... (Notificationã€Stopã€SubagentStopã€PreCompact çš„ç±»ä¼¼æ¨¡å¼)
     }
   }
   ```
   
   å°† `YOUR_PROJECT_NAME` æ›¿æ¢ä¸ºæ‚¨é¡¹ç›®çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆå¦‚ `my-api-server`ã€`react-app` ç­‰ï¼‰ã€‚

3. **ç¡®ä¿å¯è§‚æµ‹æ€§æœåŠ¡å™¨æ­£åœ¨è¿è¡Œï¼š**
   ```bash
   # ä»å¯è§‚æµ‹æ€§é¡¹ç›®ç›®å½•ï¼ˆè¿™ä¸ªä»£ç åº“ï¼‰
   ./scripts/start-system.sh
   ```

ç°åœ¨æ‚¨çš„é¡¹ç›®å°†åœ¨ Claude Code æ‰§è¡Œæ“ä½œæ—¶å‘å¯è§‚æµ‹æ€§ç³»ç»Ÿå‘é€äº‹ä»¶ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

æ‚¨å¯ä»¥é€šè¿‡è¿è¡Œæ­¤ä»“åº“çš„ .claude è®¾ç½®æ¥å¿«é€ŸæŸ¥çœ‹å…¶å·¥ä½œåŸç†ã€‚

```bash
# 1. åŒæ—¶å¯åŠ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯
./scripts/start-system.sh

# 2. åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ http://localhost:5173

# 3. æ‰“å¼€ Claude Code å¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
è¿è¡Œ git ls-files æ¥ç†è§£ä»£ç åº“ã€‚

# 4. è§‚å¯Ÿäº‹ä»¶åœ¨å®¢æˆ·ç«¯ä¸­çš„æµå¼ä¼ è¾“

# 5. å°† .claude æ–‡ä»¶å¤¹å¤åˆ¶åˆ°æ‚¨æƒ³è¦å‘å‡ºäº‹ä»¶çš„å…¶ä»–é¡¹ç›®ã€‚
cp -R .claude <æ‚¨æƒ³è¦å‘å‡ºäº‹ä»¶çš„ä»£ç åº“ç›®å½•>
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
claude-code-hooks-multi-agent-observability/
â”‚
â”œâ”€â”€ apps/                    # åº”ç”¨ç¨‹åºç»„ä»¶
â”‚   â”œâ”€â”€ server/             # Bun TypeScript æœåŠ¡å™¨
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts    # å¸¦æœ‰ HTTP/WebSocket ç«¯ç‚¹çš„ä¸»æœåŠ¡å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ db.ts       # SQLite æ•°æ®åº“ç®¡ç†å’Œè¿ç§»
â”‚   â”‚   â”‚   â””â”€â”€ types.ts    # TypeScript æ¥å£
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ events.db       # SQLite æ•°æ®åº“ï¼ˆgitignoredï¼‰
â”‚   â”‚
â”‚   â””â”€â”€ client/             # Vue 3 TypeScript å®¢æˆ·ç«¯
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ App.vue     # ä¸»åº”ç”¨ï¼Œå¸¦ä¸»é¢˜å’Œ WebSocket ç®¡ç†
â”‚       â”‚   â”œâ”€â”€ components/
â”‚       â”‚   â”‚   â”œâ”€â”€ EventTimeline.vue      # å¸¦è‡ªåŠ¨æ»šåŠ¨çš„äº‹ä»¶åˆ—è¡¨
â”‚       â”‚   â”‚   â”œâ”€â”€ EventRow.vue           # å•ä¸ªäº‹ä»¶æ˜¾ç¤º
â”‚       â”‚   â”‚   â”œâ”€â”€ FilterPanel.vue        # å¤šé€‰è¿‡æ»¤å™¨
â”‚       â”‚   â”‚   â”œâ”€â”€ ChatTranscriptModal.vue # èŠå¤©å†å²æŸ¥çœ‹å™¨
â”‚       â”‚   â”‚   â”œâ”€â”€ StickScrollButton.vue  # æ»šåŠ¨æ§åˆ¶
â”‚       â”‚   â”‚   â””â”€â”€ LivePulseChart.vue     # å®æ—¶æ´»åŠ¨å›¾è¡¨
â”‚       â”‚   â”œâ”€â”€ composables/
â”‚       â”‚   â”‚   â”œâ”€â”€ useWebSocket.ts        # WebSocket è¿æ¥é€»è¾‘
â”‚       â”‚   â”‚   â”œâ”€â”€ useEventColors.ts      # é¢œè‰²åˆ†é…ç³»ç»Ÿ
â”‚       â”‚   â”‚   â”œâ”€â”€ useChartData.ts        # å›¾è¡¨æ•°æ®èšåˆ
â”‚       â”‚   â”‚   â””â”€â”€ useEventEmojis.ts      # äº‹ä»¶ç±»å‹è¡¨æƒ…æ˜ å°„
â”‚       â”‚   â”œâ”€â”€ utils/
â”‚       â”‚   â”‚   â””â”€â”€ chartRenderer.ts       # Canvas å›¾è¡¨æ¸²æŸ“
â”‚       â”‚   â””â”€â”€ types.ts    # TypeScript æ¥å£
â”‚       â”œâ”€â”€ .env.sample     # ç¯å¢ƒé…ç½®æ¨¡æ¿
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ .claude/                # Claude Code é›†æˆ
â”‚   â”œâ”€â”€ hooks/             # é’©å­è„šæœ¬ï¼ˆPython with uvï¼‰
â”‚   â”‚   â”œâ”€â”€ send_event.py  # é€šç”¨äº‹ä»¶å‘é€å™¨
â”‚   â”‚   â”œâ”€â”€ pre_tool_use.py    # å·¥å…·éªŒè¯å’Œé˜»æ­¢
â”‚   â”‚   â”œâ”€â”€ post_tool_use.py   # ç»“æœè®°å½•
â”‚   â”‚   â”œâ”€â”€ notification.py    # ç”¨æˆ·äº¤äº’äº‹ä»¶
â”‚   â”‚   â”œâ”€â”€ user_prompt_submit.py # ç”¨æˆ·æç¤ºè®°å½•å’ŒéªŒè¯
â”‚   â”‚   â”œâ”€â”€ stop.py           # ä¼šè¯å®Œæˆ
â”‚   â”‚   â””â”€â”€ subagent_stop.py  # å­æ™ºèƒ½ä½“å®Œæˆ
â”‚   â”‚
â”‚   â””â”€â”€ settings.json      # é’©å­é…ç½®
â”‚
â”œâ”€â”€ scripts/               # å®ç”¨è„šæœ¬
â”‚   â”œâ”€â”€ start-system.sh   # å¯åŠ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ reset-system.sh   # åœæ­¢æ‰€æœ‰è¿›ç¨‹
â”‚   â””â”€â”€ test-system.sh    # ç³»ç»ŸéªŒè¯
â”‚
â””â”€â”€ logs/                 # åº”ç”¨ç¨‹åºæ—¥å¿—ï¼ˆgitignoredï¼‰
```

## ğŸ”§ ç»„ä»¶è¯¦æƒ…

### 1. é’©å­ç³»ç»Ÿï¼ˆ`.claude/hooks/`ï¼‰

> å¦‚æœæ‚¨æƒ³æŒæ¡ claude code é’©å­ï¼Œè¯·è§‚çœ‹[æ­¤è§†é¢‘](https://github.com/disler/claude-code-hooks-mastery)

é’©å­ç³»ç»Ÿæ‹¦æˆª Claude Code ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼š

- **`send_event.py`**ï¼šå°†äº‹ä»¶æ•°æ®å‘é€åˆ°å¯è§‚æµ‹æ€§æœåŠ¡å™¨çš„æ ¸å¿ƒè„šæœ¬
  - æ”¯æŒ `--add-chat` æ ‡å¿—ä»¥åŒ…å«å¯¹è¯å†å²
  - å‘é€å‰éªŒè¯æœåŠ¡å™¨è¿æ¥
  - é€šè¿‡é€‚å½“çš„é”™è¯¯å¤„ç†å¤„ç†æ‰€æœ‰äº‹ä»¶ç±»å‹

- **ç‰¹å®šäº‹ä»¶é’©å­**ï¼šæ¯ä¸ªéƒ½å®ç°éªŒè¯å’Œæ•°æ®æå–
  - `pre_tool_use.py`ï¼šé˜»æ­¢å±é™©å‘½ä»¤ï¼ŒéªŒè¯å·¥å…·ä½¿ç”¨
  - `post_tool_use.py`ï¼šæ•è·æ‰§è¡Œç»“æœå’Œè¾“å‡º
  - `notification.py`ï¼šè·Ÿè¸ªç”¨æˆ·äº¤äº’ç‚¹
  - `user_prompt_submit.py`ï¼šè®°å½•ç”¨æˆ·æç¤ºï¼Œæ”¯æŒéªŒè¯ï¼ˆv1.0.54+ï¼‰
  - `stop.py`ï¼šè®°å½•ä¼šè¯å®Œæˆå’Œå¯é€‰çš„èŠå¤©å†å²
  - `subagent_stop.py`ï¼šç›‘æ§å­æ™ºèƒ½ä½“ä»»åŠ¡å®Œæˆ

### 2. æœåŠ¡å™¨ï¼ˆ`apps/server/`ï¼‰

åŸºäº Bun çš„ TypeScript æœåŠ¡å™¨ï¼Œå…·æœ‰å®æ—¶åŠŸèƒ½ï¼š

- **æ•°æ®åº“**ï¼šSQLite with WAL æ¨¡å¼ï¼Œæ”¯æŒå¹¶å‘è®¿é—®
- **ç«¯ç‚¹**ï¼š
  - `POST /events` - ä»æ™ºèƒ½ä½“æ¥æ”¶äº‹ä»¶
  - `GET /events/recent` - åˆ†é¡µäº‹ä»¶æ£€ç´¢å’Œè¿‡æ»¤
  - `GET /events/filter-options` - å¯ç”¨è¿‡æ»¤å™¨å€¼
  - `WS /stream` - å®æ—¶äº‹ä»¶å¹¿æ’­
- **åŠŸèƒ½**ï¼š
  - è‡ªåŠ¨æ¶æ„è¿ç§»
  - äº‹ä»¶éªŒè¯
  - å‘æ‰€æœ‰å®¢æˆ·ç«¯å¹¿æ’­ WebSocket
  - èŠå¤©è®°å½•å­˜å‚¨

### 3. å®¢æˆ·ç«¯ï¼ˆ`apps/client/`ï¼‰

Vue 3 åº”ç”¨ç¨‹åºï¼Œå…·æœ‰å®æ—¶å¯è§†åŒ–ï¼š

- **è§†è§‰è®¾è®¡**ï¼š
  - åŒè‰²ç³»ç»Ÿï¼šåº”ç”¨é¢œè‰²ï¼ˆå·¦è¾¹æ¡†ï¼‰+ ä¼šè¯é¢œè‰²ï¼ˆç¬¬äºŒè¾¹æ¡†ï¼‰
  - æ¢¯åº¦æŒ‡ç¤ºå™¨ç”¨äºè§†è§‰åŒºåˆ†
  - æ·±è‰²/æµ…è‰²ä¸»é¢˜æ”¯æŒ
  - å“åº”å¼å¸ƒå±€å’Œæµç•…åŠ¨ç”»

- **åŠŸèƒ½**ï¼š
  - å®æ—¶ WebSocket æ›´æ–°
  - å¤šæ¡ä»¶è¿‡æ»¤ï¼ˆåº”ç”¨ã€ä¼šè¯ã€äº‹ä»¶ç±»å‹ï¼‰
  - å¸¦ä¼šè¯é¢œè‰²æ¡å’Œäº‹ä»¶ç±»å‹æŒ‡ç¤ºå™¨çš„å®æ—¶è„‰å†²å›¾è¡¨
  - æ—¶é—´èŒƒå›´é€‰æ‹©ï¼ˆ1åˆ†é’Ÿã€3åˆ†é’Ÿã€5åˆ†é’Ÿï¼‰å’Œé€‚å½“çš„æ•°æ®èšåˆ
  - å¸¦è¯­æ³•é«˜äº®çš„èŠå¤©è®°å½•æŸ¥çœ‹å™¨
  - å¸¦æ‰‹åŠ¨è¦†ç›–çš„è‡ªåŠ¨æ»šåŠ¨
  - äº‹ä»¶é™åˆ¶ï¼ˆé€šè¿‡ `VITE_MAX_EVENTS_TO_DISPLAY` é…ç½®ï¼‰

- **å®æ—¶è„‰å†²å›¾è¡¨**ï¼š
  - åŸºäº Canvas çš„å®æ—¶å¯è§†åŒ–
  - æ¯ä¸ªæ¡å½¢çš„ä¼šè¯ç‰¹å®šé¢œè‰²
  - æ¡å½¢ä¸Šæ˜¾ç¤ºçš„äº‹ä»¶ç±»å‹è¡¨æƒ…
  - æµç•…åŠ¨ç”»å’Œå‘å…‰æ•ˆæœ
  - å“åº”è¿‡æ»¤å™¨å˜åŒ–

## ğŸ”„ æ•°æ®æµ

1. **äº‹ä»¶ç”Ÿæˆ**ï¼šClaude Code æ‰§è¡Œæ“ä½œï¼ˆå·¥å…·ä½¿ç”¨ã€é€šçŸ¥ç­‰ï¼‰
2. **é’©å­æ¿€æ´»**ï¼šåŸºäº `settings.json` é…ç½®è¿è¡Œç›¸åº”çš„é’©å­è„šæœ¬
3. **æ•°æ®æ”¶é›†**ï¼šé’©å­è„šæœ¬æ”¶é›†ä¸Šä¸‹æ–‡ï¼ˆå·¥å…·åç§°ã€è¾“å…¥ã€è¾“å‡ºã€ä¼šè¯ IDï¼‰
4. **ä¼ è¾“**ï¼š`send_event.py` é€šè¿‡ HTTP POST å‘æœåŠ¡å™¨å‘é€ JSON æœ‰æ•ˆè´Ÿè½½
5. **æœåŠ¡å™¨å¤„ç†**ï¼š
   - éªŒè¯äº‹ä»¶ç»“æ„
   - å­˜å‚¨åœ¨ SQLite ä¸­å¹¶æ·»åŠ æ—¶é—´æˆ³
   - å¹¿æ’­åˆ° WebSocket å®¢æˆ·ç«¯
6. **å®¢æˆ·ç«¯æ›´æ–°**ï¼šVue åº”ç”¨æ¥æ”¶äº‹ä»¶å¹¶å®æ—¶æ›´æ–°æ—¶é—´çº¿

## ğŸ¨ äº‹ä»¶ç±»å‹å’Œå¯è§†åŒ–

| äº‹ä»¶ç±»å‹   | è¡¨æƒ… | ç”¨é€”               | é¢œè‰²ç¼–ç   | ç‰¹æ®Šæ˜¾ç¤º |
| ------------ | ----- | --------------------- | ------------- | --------------- |
| PreToolUse   | ğŸ”§     | å·¥å…·æ‰§è¡Œå‰ | åŸºäºä¼šè¯ | å·¥å…·åç§°å’Œè¯¦æƒ… |
| PostToolUse  | âœ…     | å·¥å…·å®Œæˆå | åŸºäºä¼šè¯ | å·¥å…·åç§°å’Œç»“æœ |
| Notification | ğŸ””     | ç”¨æˆ·äº¤äº’     | åŸºäºä¼šè¯ | é€šçŸ¥æ¶ˆæ¯ |
| Stop         | ğŸ›‘     | å“åº”å®Œæˆ   | åŸºäºä¼šè¯ | æ‘˜è¦å’ŒèŠå¤©è®°å½• |
| SubagentStop | ğŸ‘¥     | å­æ™ºèƒ½ä½“å®Œæˆ     | åŸºäºä¼šè¯ | å­æ™ºèƒ½ä½“è¯¦æƒ… |
| PreCompact   | ğŸ“¦     | ä¸Šä¸‹æ–‡å‹ç¼©    | åŸºäºä¼šè¯ | å‹ç¼©è¯¦æƒ… |
| UserPromptSubmit | ğŸ’¬ | ç”¨æˆ·æç¤ºæäº¤ | åŸºäºä¼šè¯ | æç¤ºï¼š_"ç”¨æˆ·æ¶ˆæ¯"_ï¼ˆæ–œä½“ï¼‰ |

### UserPromptSubmit äº‹ä»¶ï¼ˆv1.0.54+ï¼‰

`UserPromptSubmit` é’©å­åœ¨ Claude å¤„ç†ä¹‹å‰æ•è·æ¯ä¸ªç”¨æˆ·æç¤ºã€‚åœ¨ UI ä¸­ï¼š
- æ˜¾ç¤ºä¸ºæ–œä½“æ–‡æœ¬ `æç¤ºï¼š"ç”¨æˆ·æ¶ˆæ¯"`
- å†…è”æ˜¾ç¤ºå®é™…æç¤ºå†…å®¹ï¼ˆæˆªæ–­åˆ° 100 ä¸ªå­—ç¬¦ï¼‰
- å¯ç”¨ AI æ‘˜è¦æ—¶ï¼Œæ‘˜è¦æ˜¾ç¤ºåœ¨å³ä¾§
- ç”¨äºè·Ÿè¸ªç”¨æˆ·æ„å›¾å’Œå¯¹è¯æµç¨‹

## ğŸ”Œ é›†æˆ

### å¯¹äºæ–°é¡¹ç›®

1. å¤åˆ¶äº‹ä»¶å‘é€å™¨ï¼š
   ```bash
   cp .claude/hooks/send_event.py YOUR_PROJECT/.claude/hooks/
   ```

2. æ·»åŠ åˆ°æ‚¨çš„ `.claude/settings.json`ï¼š
   ```json
   {
     "hooks": {
       "PreToolUse": [{
         "matcher": ".*",
         "hooks": [{
           "type": "command",
           "command": "uv run .claude/hooks/send_event.py --source-app YOUR_APP --event-type PreToolUse"
         }]
       }]
     }
   }
   ```

### å¯¹äºæ­¤é¡¹ç›®

å·²é›†æˆï¼é’©å­åŒæ—¶è¿è¡ŒéªŒè¯å’Œå¯è§‚æµ‹æ€§ï¼š
```json
{
  "type": "command",
  "command": "uv run .claude/hooks/pre_tool_use.py"
},
{
  "type": "command", 
  "command": "uv run .claude/hooks/send_event.py --source-app cc-hooks-observability --event-type PreToolUse"
}
```

## ğŸ§ª æµ‹è¯•

```bash
# ç³»ç»ŸéªŒè¯
./scripts/test-system.sh

# æ‰‹åŠ¨äº‹ä»¶æµ‹è¯•
curl -X POST http://localhost:4000/events \
  -H "Content-Type: application/json" \
  -d '{
    "source_app": "test",
    "session_id": "test-123",
    "hook_event_type": "PreToolUse",
    "payload": {"tool_name": "Bash", "tool_input": {"command": "ls"}}
  }'
```

## âš™ï¸ é…ç½®

### ç¯å¢ƒå˜é‡

å°† `.env.sample` å¤åˆ¶åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸­çš„ `.env` å¹¶å¡«å…¥æ‚¨çš„ API å¯†é’¥ï¼š

**åº”ç”¨ç¨‹åºæ ¹ç›®å½•**ï¼ˆ`.env` æ–‡ä»¶ï¼‰ï¼š
- `ANTHROPIC_API_KEY` â€“ Anthropic Claude API å¯†é’¥ï¼ˆå¿…éœ€ï¼‰
- `ENGINEER_NAME` â€“ æ‚¨çš„å§“åï¼ˆç”¨äºæ—¥å¿—è®°å½•/æ ‡è¯†ï¼‰
- `GEMINI_API_KEY` â€“ Google Gemini API å¯†é’¥ï¼ˆå¯é€‰ï¼‰
- `OPENAI_API_KEY` â€“ OpenAI API å¯†é’¥ï¼ˆå¯é€‰ï¼‰
- `ELEVEN_API_KEY` â€“ ElevenLabs API å¯†é’¥ï¼ˆå¯é€‰ï¼‰

**å®¢æˆ·ç«¯**ï¼ˆ`apps/client/.env` ä¸­çš„ `.env` æ–‡ä»¶ï¼‰ï¼š
- `VITE_MAX_EVENTS_TO_DISPLAY=100` â€“ è¦æ˜¾ç¤ºçš„æœ€å¤§äº‹ä»¶æ•°ï¼ˆè¶…å‡ºæ—¶åˆ é™¤æœ€æ—§çš„ï¼‰

### æœåŠ¡å™¨ç«¯å£

- æœåŠ¡å™¨ï¼š`4000`ï¼ˆHTTP/WebSocketï¼‰
- å®¢æˆ·ç«¯ï¼š`5173`ï¼ˆVite å¼€å‘æœåŠ¡å™¨ï¼‰

## ğŸ›¡ï¸ å®‰å…¨åŠŸèƒ½

- é˜»æ­¢å±é™©å‘½ä»¤ï¼ˆ`rm -rf` ç­‰ï¼‰
- é˜²æ­¢è®¿é—®æ•æ„Ÿæ–‡ä»¶ï¼ˆ`.env`ã€ç§é’¥ï¼‰
- åœ¨æ‰§è¡Œå‰éªŒè¯æ‰€æœ‰è¾“å…¥
- æ ¸å¿ƒåŠŸèƒ½æ— å¤–éƒ¨ä¾èµ–

## ğŸ“Š æŠ€æœ¯æ ˆ

- **æœåŠ¡å™¨**ï¼šBunã€TypeScriptã€SQLite
- **å®¢æˆ·ç«¯**ï¼šVue 3ã€TypeScriptã€Viteã€Tailwind CSS
- **é’©å­**ï¼šPython 3.8+ã€Astral uvã€TTSï¼ˆElevenLabs æˆ– OpenAIï¼‰ã€LLMsï¼ˆClaude æˆ– OpenAIï¼‰
- **é€šä¿¡**ï¼šHTTP RESTã€WebSocket

## ğŸ”§ æ•…éšœæ’é™¤

### é’©å­è„šæœ¬æ— æ³•æ­£å¸¸å·¥ä½œ

å¦‚æœæ‚¨çš„é’©å­è„šæœ¬æ²¡æœ‰æ­£ç¡®æ‰§è¡Œï¼Œå¯èƒ½æ˜¯ç”±äº `.claude/settings.json` ä¸­çš„ç›¸å¯¹è·¯å¾„é—®é¢˜ã€‚Claude Code æ–‡æ¡£å»ºè®®å¯¹å‘½ä»¤è„šæœ¬ä½¿ç”¨ç»å¯¹è·¯å¾„ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨è‡ªå®šä¹‰ Claude Code æ–œæ å‘½ä»¤è‡ªåŠ¨å°†æ‰€æœ‰ç›¸å¯¹è·¯å¾„è½¬æ¢ä¸ºç»å¯¹è·¯å¾„ï¼š

```bash
# åœ¨ Claude Code ä¸­ï¼Œåªéœ€è¿è¡Œï¼š
/convert_paths_absolute
```

æ­¤å‘½ä»¤å°†ï¼š
- åœ¨æ‚¨çš„é’©å­å‘½ä»¤è„šæœ¬ä¸­æŸ¥æ‰¾æ‰€æœ‰ç›¸å¯¹è·¯å¾„
- åŸºäºæ‚¨å½“å‰çš„å·¥ä½œç›®å½•å°†å®ƒä»¬è½¬æ¢ä¸ºç»å¯¹è·¯å¾„
- åˆ›å»ºåŸå§‹ settings.json çš„å¤‡ä»½
- æ˜¾ç¤ºå…·ä½“è¿›è¡Œäº†å“ªäº›æ›´æ”¹

è¿™ç¡®ä¿æ‚¨çš„é’©å­æ— è®ºä»å“ªé‡Œæ‰§è¡Œ Claude Code éƒ½èƒ½æ­£ç¡®å·¥ä½œã€‚

## æŒæ¡ AI ç¼–ç 
> ä¸ºä»£ç†å·¥ç¨‹åšå‡†å¤‡

é€šè¿‡åŸºç¡€[AI ç¼–ç åŸåˆ™](https://agenticengineer.com/principled-ai-coding?y=cchookobvs)å­¦ä¹ ä½¿ç”¨ AI ç¼–ç 

å…³æ³¨ [IndyDevDan YouTube é¢‘é“](https://www.youtube.com/@indydevdan)è·å–æ›´å¤š AI ç¼–ç æŠ€å·§å’Œçªé—¨ã€‚